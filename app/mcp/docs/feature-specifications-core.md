# MCP機能仕様書 - コア機能

## 概要

この文書は、MCP（Model Context Protocol）管理アプリケーションのコア機能に関する詳細仕様を提供します。各機能の目的、機能性、ユーザーインタラクション、技術実装の詳細を説明します。

## 機能一覧

1. [ダッシュボード](#ダッシュボード)
2. [MCPツール管理](#mcpツール管理)
3. [データソース管理](#データソース管理)

---

## ダッシュボード

### 目的

MCPシステムの状況を一元的に表示し、管理者の主要ナビゲーションハブとして機能します。

### 機能要件

#### FR-DASH-001: システム統計表示

- **説明**: 主要なシステムメトリクスを理解しやすい形式で表示
- **受入基準**:
  - MCPツールの総数を表示
  - データソースの総数を表示
  - 最後のシステム更新タイムスタンプを表示
  - データ変更時の統計リアルタイム更新

#### FR-DASH-002: クイックナビゲーション

- **説明**: 管理モジュールへの直接アクセスを提供
- **受入基準**:
  - 各主要機能の管理カードを表示
  - 各管理エリアの説明テキストを含む
  - 管理ページへのワンクリックナビゲーションを提供

#### FR-DASH-003: 視覚的一貫性

- **説明**: 全ダッシュボード要素で一貫した視覚デザインを維持
- **受入基準**:
  - 一貫したカードベースレイアウトを使用
  - 異なるメトリクスに適切な色分けを適用
  - 全画面サイズでレスポンシブデザインを確保

### ユーザーインタラクション

- **表示**: 統計カードとナビゲーションカードを含むグリッドレイアウト
- **ナビゲーション**: 管理カードクリックで対応する管理ページに移動
- **更新**: ページ読み込み時に最新データを自動取得

---

## MCPツール管理

### 目的

MCP検索ツールの設定と管理を行います。ツールの追加、編集、削除、および使用状況の監視を提供します。

### 機能要件

#### FR-TOOLS-001: ツール一覧表示

- **説明**: 全MCPツールを表形式で表示
- **受入基準**:
  - ツール名、タイトル、説明、ターゲット、最終使用日を表示
  - 使用期間ベースのソート機能
  - 検索とフィルタリング機能
  - ページネーション対応

#### FR-TOOLS-002: ツール追加

- **説明**: 新しいMCPツール作成機能
- **受入基準**:
  - モーダルフォームでツール情報入力
  - 必須フィールドバリデーション
  - ツール名の重複チェック
  - 成功時の一覧更新

#### FR-TOOLS-003: ツール編集

- **説明**: 既存ツールの修正機能
- **受入基準**:
  - 現在の値で事前入力されたフォーム
  - 同じバリデーション適用
  - 変更確認
  - 成功時の一覧更新

#### FR-TOOLS-004: ツール削除

- **説明**: ツール削除機能
- **受入基準**:
  - 削除前の確認ダイアログ
  - カスケード削除の影響警告
  - 成功時の一覧からの除去

### データ管理

#### ツールデータ構造

- **ID**: 一意識別子
- **名前**: API呼び出し用内部名
- **タイトル**: ユーザー表示名
- **説明**: ツール機能の詳細説明
- **ターゲット**: 操作対象ドキュメントタイプ
- **最終使用日**: ISO形式タイムスタンプ
- **作成日**: ISO形式タイムスタンプ

---

## データソース管理

### 目的

データ取得ソースの設定と管理を行います。複数のデータソースタイプとターゲットドキュメントの関連付けを提供します。

### 機能要件

#### FR-SOURCES-001: ソース一覧表示

- **説明**: 全データソースを表形式で表示
- **受入基準**:
  - ターゲット、ソース数、作成日、更新日を表示
  - ターゲットタイプによるフィルタリング
  - 検索機能
  - ソース詳細の展開表示

#### FR-SOURCES-002: ソース追加

- **説明**: 新しいデータソース作成機能
- **受入基準**:
  - ターゲットドキュメント選択
  - 複数ソースURL追加対応
  - ソースタイプ選択（text、firecrawl）
  - URL形式バリデーション

#### FR-SOURCES-003: ソース編集

- **説明**: 既存データソース修正機能
- **受入基準**:
  - 現在設定で事前入力
  - ソース追加・削除機能
  - バリデーション適用
  - 変更履歴記録

#### FR-SOURCES-004: ソース削除

- **説明**: データソース削除機能
- **受入基準**:
  - 削除確認ダイアログ
  - 関連データへの影響警告
  - 成功時の一覧更新

### データ管理

#### データソース構造

- **ID**: 一意識別子
- **ターゲット**: 対象ドキュメントタイプ
- **ソース配列**: URL とタイプのペア
- **作成日**: ISO形式タイムスタンプ
- **更新日**: ISO形式タイムスタンプ

#### サポートソースタイプ

- **text**: プレーンテキストファイル
- **firecrawl**: Firecrawl API経由取得

---

## 技術考慮事項

### パフォーマンス

- 大量データ表示でのページネーション
- 検索・フィルタリングのクライアントサイド最適化
- モーダル操作の応答性確保

### セキュリティ

- 全フォーム入力のバリデーション
- XSS攻撃防止
- 権限ベースの操作制御

### アクセシビリティ

- キーボードナビゲーション対応
- スクリーンリーダー対応
- WCAG 2.1 AA準拠

### 関連ドキュメント

- **UI機能仕様**: [feature-specifications-ui.md](./feature-specifications-ui.md) - UIシステム詳細仕様
- **システムアーキテクチャ**: [system-architecture.md](./system-architecture.md) - システム設計概要
